<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>NCAA Division I Women's Volleyball Bracket</title>
        <meta name="description" content="fillable ncaa bracket">
        <link rel="stylesheet" href="styles.css">
		<style>
			li{
			color: #444
			}
			b{
			color: #000
			}
		</style>
    </head>
    <body>
        <!--[if lte IE 9]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
        <![endif]-->

		<h2>oh wow, here are your picks <span id="myname"></span></h2>
		<h3 id="share"></h3>
		<ol>
		</ol>
		
        <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
		<script>
		function getQueryVariable(variable) {
			var query = window.location.search.substring(1);
			var vars = query.split('&');
			for (var i = 0; i < vars.length; i++) {
				var pair = vars[i].split('=');
				if (decodeURIComponent(pair[0]) == variable) {
					return decodeURIComponent(pair[1]).replace('+',' ');
				}
			}
			console.log('Query variable %s not found', variable);
		}
		//let y = jQuery('.name')
		//let z = []
		//y.each((a,b)=>{z.push(b.textContent)})
		//Array.from(new Set(z))
		//remove 16th element
		teams = ["Stanford", "Alabama State", "Loyola Marym't", "Duke", "Tennessee", "Colorado State", "Northern Ariz.", "Washington St.", "Creighton", "South Dakota", "St. Mary's (Cal.)", "Washington", "Syracuse", "Yale", "Howard", "Penn St.", "Illinois", "Eastern Mich.", "Louisville", "Dayton", "Cincinnati", "Illinois State", "High Point", "Marquette", "USC", "Samford", "San Diego", "Cal Poly", "UNI", "Pepperdine", "Green Bay", "Wisconsin", "Texas", "SFA", "Rice", "Texas State", "Michigan", "Navy", "Iona", "Pittsburgh", "UCF", "FGCU", "Florida State", "Florida", "Utah", "Denver", "Stony Brook", "BYU", "Nebraska", "Hofstra", "Arizona", "Missouri", "Purdue", "East Tenn. St.", "Murray State", "Kentucky", "Oregon", "New Mexico St.", "Hawaii", "Baylor", "South Carolina", "Colorado", "Bryant", "Minnesota"]
			
		function printPicks(){
			for(var i = 0; i<64; i+=2)
				$('ol').append('<li>'+ teams[i] + ' vs. ' + teams[i+1] + ': <b>' + getQueryVariable('m' + (i/2+1)) + '</b></li>')
			for(var i = 1; i<=32; i+=2)
				$('ol').append('<li>'+ getQueryVariable('m' + i) + ' vs. ' + getQueryVariable('m' + (i+1)) + ': <b>' + getQueryVariable('m' + (32+(Math.floor(i/2)+1))) + '</b></li>')
			for(var i = 33; i<=48; i+=2)
				$('ol').append('<li>'+ getQueryVariable('m' + i) + ' vs. ' + getQueryVariable('m' + (i+1)) + ': <b>' + getQueryVariable('m' + (48+(Math.floor((i-32)/2)+1))) + '</b></li>')
			for(var i = 49; i<=56; i+=2)
				$('ol').append('<li>'+ getQueryVariable('m' + i) + ' vs. ' + getQueryVariable('m' + (i+1)) + ': <b>' + getQueryVariable('m' + (56+(Math.floor((i-48)/2)+1))) + '</b></li>')
			$('ol').append('<li>'+ getQueryVariable('m57') + ' vs. ' + getQueryVariable('m58') + ': <b>' + getQueryVariable('m61') + '</b></li>')
			$('ol').append('<li>'+ getQueryVariable('m59') + ' vs. ' + getQueryVariable('m60') + ': <b>' + getQueryVariable('m62') + '</b></li>')
			$('ol').append('<li>'+ getQueryVariable('m61') + ' vs. ' + getQueryVariable('m62') + ': <b>' + getQueryVariable('m63') + '</b></li>')
		}
		
		$(function(){
			$('#myname').append(getQueryVariable('name'));
			printPicks();
			if (getQueryVariable('shared') != 1)
				$.ajax({
				  url: "https://api.rebrandly.com/v1/links",
				  type: "post",
				  data: JSON.stringify({
						"destination" : window.location.href + '&shared=1'
					  , "domain": { "fullName": "rebrand.ly" }
				  }),
				  headers: {
					"Content-Type": "application/json",
					"apikey": "ed72bb1cdc7346dcafb1645d7239e04c"
				  },
				  dataType: "json",
				  success: function (link) {
					$('#share').append("share your picks &rarr; <a href='https://"+link.shortUrl+"'>"+link.shortUrl+"</a>");
				  }
				});
		})
		
		console.log(getQueryVariable('m1'));
		</script>
    </body>
</html>
